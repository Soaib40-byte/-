<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Telegram Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

<h3 id="status">Loading...</h3>
<!DOCTYPE html>
<html>
<body>

<button onclick="go('freefire')">Free Fire</button>
<button onclick="go('bloodstrike')">Blood Strike</button>

<script>
if (!localStorage.getItem("user_id")) {
  location.href = "index.html";
}

function go(game) {
  localStorage.setItem("game", game);
  location.href = "mode.html";
}
</script>

</body>
</html>
<script>
  const tg = window.Telegram.WebApp;
  tg.ready();

  const user = tg.initDataUnsafe.user;

  if (!user) {
    document.getElementById("status").innerText = "Telegram user not found!";
  } else {
    // Save user data (Auto Login)
    localStorage.setItem("user_id", user.id);
    localStorage.setItem("user_name", user.first_name);
    localStorage.setItem("username", user.username ?? "");

    // Redirect to Home
    window.location.href = "home.html";
  }
</script>

</body>
</html>